{% extends 'base.html' %}

{% block content %}
<script type="text/javascript">
  function SetSrc() {
    document.getElementById("myIfreme").src = document.getElementById("txtSRC").value;
  }

  // 2. This code loads the IFrame Player API code asynchronously.
  var tag = document.createElement('script');

  tag.src = "https://www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  // 3. This function creates an <iframe> (and YouTube player)
  //    after the API code downloads.
  var player;
  function onYouTubeIframeAPIReady() {
    player = new YT.Player('player', {
      height: '390',
      width: '640',
      videoId: 'M7lc1UVf-VE',
      playerVars: {
        'playsinline': 1
      },
      events: {
        'onReady': onPlayerReady,
        'onStateChange': onPlayerStateChange
      }
    });
  }

  // 4. The API will call this function when the video player is ready.
  function onPlayerReady(event) {
    event.target.playVideo();
  }

  // 5. The API calls this function when the player's state changes.
  //    The function indicates that when playing a video (state=1),
  //    the player should play for six seconds and then stop.
  var done = false;
  function onPlayerStateChange(event) {
    if (event.data == YT.PlayerState.PLAYING && !done) {
      setTimeout(stopVideo, 6000);
      done = true;
    }
  }
  function stopVideo() {
    player.stopVideo();
  }
</script>

<div class="my-10 rounded-lg">

  <button>
    <a href="{{ url_for('index')}}">
      <div class="flex flex-row">
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
          </svg>

        </div>
        <div>Back</div>
      </div>
    </a>

  </button>

  <div class="px-4 pt-2 grid grid-flow-col bg-transparent">
    <div class="justify-self-end">
      <a href="{{ url_for('edit', recording_id=recording[0]) }}">
        <span class="fa fa-edit td-edit"></span>
      </a>
    </div>
  </div>

  <div class="" style="font-family:'Open Sans',sans-serif;">
    <h1 class="pb-4 px-3 text-4xl tracking-wide" style="font-family:'EB Garamond',serif; color:#012169">{% block title
      %}
      {{ recording[2] }} {% endblock %}</h1>

    <ul class="list-group list-group-flush">
      <li class="list-group-item"><span class="font-bold">Date:</span> {{ recording[3] }}</li>
      <li class="list-group-item"><span class="font-bold">Summary:</span> {{ recording[7] }}</li>
      <li class="list-group-item"><span class="font-bold">
          <div class="flex flex-row items-center overflow-x-auto">
            <div class="mr-2">
              Tags:
            </div>
        </span>
        {% for tag, value in recording[9] | dictsort(false, 'value', reverse=true) %}
        {% if value <= -3 %} <span class="badge text-base rounded-full bg-yellow-300 recording-tag">{{ tag }}</span>
          {% elif value >= 3 %}
          <span class="badge text-base rounded-full bg-yellow-600 recording-tag">{{ tag }}</span>
          {% else %}
          <span class="badge text-base rounded-full bg-yellow-500 recording-tag">{{ tag }}</span>
          {% endif %}
          <a class="fa fa-chevron-up text-gray-400 hover:text-gray-900 voting mx-2"
            href="{{ url_for('upvote_tag', id=recording[0], tag=tag) }}" class="fa fa-arrow-up voting"></a>
          {{ value }}
          <a class="fa fa-chevron-down text-gray-400 hover:text-gray-900 voting mx-2 pr-4"
            href="{{ url_for('downvote_tag', id=recording[0], tag=tag) }}" class="fa fa-arrow-down voting"></a>
          <br>
          {% endfor %}
  </div>
  </li>
  </ul>
</div>
</div>
<iframe width="840" height="473" src="{{ recording[4] }}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<!-- <iframe id="player" type="text/html" width="100%" height="500px"
  src="http://www.youtube.com/embed/M7lc1UVf-VE?enablejsapi=1" frameborder="0"></iframe> -->
<!-- <iframe src="{{ recording[4] }}" height="500px" width=100% title="Embedded Zoom Recording"
  allowfullscreen="allowfullscreen"></iframe> -->
<!--This is for if people want to embed a video through the create page-->
<!-- <iframe id="myIfreme" src="" frameborder="0" marginwidth="0" scrolling="yes"
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
  allowfullscreen></iframe> -->

</div>


{% endblock %}