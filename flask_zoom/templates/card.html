{% extends 'base.html' %}

{% block content %}
<div class="homepage my-10">

  <div>
    <h1 class="hidden">{% block
      title
      %} Home{%
      endblock %}</h1>
    <h1 class="order-1 text-2xl md:text-3xl  font-bold tracking-tight my-4" style="color:#012169">
      <span class="font-bold">Math 218: Matrices and Vector Spaces</span>
    </h1>
    <p class="my-4 md:text-xl">Welcome! You have found the homepage of the Spring 2021 manifestation of Math 218. </p>
  </div>
  <div class="flex flex-wrap md:justify-between items-center mb-4">
    <div class="flex flex-wrap md:flex-row items-center">
      <!-- button for list view -->
      <button class=" p-2 mr-2 rounded-lg text-gray-600 w-8 h-8 hover:text-white hover:bg-blue-900">
        <a href="{{ url_for('index')}}" class="hover:text-white">
          <svg class="" width="14" height="14" viewBox="0 0 12 13" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="12" height="3" rx="0.5" fill="currentColor" />
            <rect y="5" width="12" height="3" rx="0.5" fill="currentColor" />
            <rect y="10" width="12" height="3" rx="0.5" fill="currentColor" />
          </svg>
        </a>
      </button>
      <!-- button for card view -->
      <button class="p-2 bg-duke-lightblue border border-gray-100 mr-4 w-8 h-8 rounded-lg">
        <a href="{{ url_for('card')}}" class="hover:text-white">
          <svg width="14" height="14" viewBox="0 0 14 14" fill="#012169" xmlns="http://www.w3.org/2000/svg">
            <rect x="8" width="5.29412" height="5.29412" rx="0.5" fill="012169" />
            <rect width="5.29412" height="5.29412" rx="0.5" fill="012169" />
            <rect x="8" y="8" width="5.29412" height="5.29412" rx="0.5" fill="012169" />
            <rect y="8" width="5.29412" height="5.29412" rx="0.5" fill="012169" />
          </svg>
        </a>
      </button>

      <!-- Date Filter -->
      <form method="get">
        <div
          class="form-group hover:bg-duke-lightblue rounded-lg border px-2 w-44 h-8 mr-4 flex flex-row border-gray-100">
          {% if sort_order=='date_desc' %}
          <button type="submit" class="flex flex-row items-center text-duke-darkgray hover:text-blue-600">
            <svg class="mr-2" width="17" height="15" viewBox="0 0 17 15" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd"
                d="M11.5006 14.0009C11.6332 14.0009 11.7604 13.9482 11.8542 13.8544C11.948 13.7607 12.0006 13.6335 12.0006 13.5009V1.70789L15.1466 4.85489C15.2405 4.94878 15.3679 5.00153 15.5006 5.00153C15.6334 5.00153 15.7607 4.94878 15.8546 4.85489C15.9485 4.76101 16.0013 4.63367 16.0013 4.50089C16.0013 4.36812 15.9485 4.24078 15.8546 4.14689L11.8546 0.146894C11.8082 0.100331 11.753 0.0633877 11.6923 0.0381812C11.6315 0.0129748 11.5664 0 11.5006 0C11.4349 0 11.3697 0.0129748 11.309 0.0381812C11.2483 0.0633877 11.1931 0.100331 11.1466 0.146894L7.14663 4.14689C7.05275 4.24078 7 4.36812 7 4.50089C7 4.63367 7.05275 4.76101 7.14663 4.85489C7.24052 4.94878 7.36786 5.00153 7.50063 5.00153C7.63341 5.00153 7.76075 4.94878 7.85463 4.85489L11.0006 1.70789V13.5009C11.0006 13.6335 11.0533 13.7607 11.1471 13.8544C11.2408 13.9482 11.368 14.0009 11.5006 14.0009ZM4.50063 0.000893772C4.63324 0.000893772 4.76042 0.0535722 4.85419 0.14734C4.94795 0.241109 5.00063 0.368286 5.00063 0.500894V12.2939L8.14663 9.14689C8.24052 9.05301 8.36786 9.00026 8.50063 9.00026C8.63341 9.00026 8.76074 9.05301 8.85463 9.14689C8.94852 9.24078 9.00126 9.36812 9.00126 9.50089C9.00126 9.63367 8.94852 9.76101 8.85463 9.85489L4.85463 13.8549C4.80819 13.9015 4.75301 13.9384 4.69227 13.9636C4.63152 13.9888 4.5664 14.0018 4.50063 14.0018C4.43486 14.0018 4.36974 13.9888 4.309 13.9636C4.24825 13.9384 4.19308 13.9015 4.14663 13.8549L0.146632 9.85489C0.052745 9.76101 -3.1283e-09 9.63367 0 9.50089C3.1283e-09 9.36812 0.052745 9.24078 0.146632 9.14689C0.240518 9.05301 0.367856 9.00026 0.500632 9.00026C0.633407 9.00026 0.760745 9.05301 0.854632 9.14689L4.00063 12.2939V0.500894C4.00063 0.368286 4.05331 0.241109 4.14708 0.14734C4.24085 0.0535722 4.36802 0.000893772 4.50063 0.000893772Z"
                fill="currentColor" />
            </svg>
            Newest to Oldest
          </button>
          {% else %}
          <button type="submit" class="flex flex-row items-center text-duke-darkgray hover:text-blue-600">
            <svg class="mr-2" width="17" height="15" viewBox="0 0 17 15" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd"
                d="M11.5006 0.000876427C11.6332 0.000876427 11.7604 0.0535545 11.8542 0.147323C11.948 0.241091 12.0006 0.368268 12.0006 0.500876V12.2939L15.1466 9.14688C15.2405 9.05299 15.3679 9.00024 15.5006 9.00024C15.6334 9.00024 15.7607 9.05299 15.8546 9.14688C15.9485 9.24076 16.0013 9.3681 16.0013 9.50088C16.0013 9.63365 15.9485 9.76099 15.8546 9.85488L11.8546 13.8549C11.8082 13.9014 11.753 13.9384 11.6923 13.9636C11.6315 13.9888 11.5664 14.0018 11.5006 14.0018C11.4349 14.0018 11.3697 13.9888 11.309 13.9636C11.2483 13.9384 11.1931 13.9014 11.1466 13.8549L7.14663 9.85488C7.05275 9.76099 7 9.63365 7 9.50088C7 9.3681 7.05275 9.24076 7.14663 9.14688C7.24052 9.05299 7.36786 9.00024 7.50063 9.00024C7.63341 9.00024 7.76075 9.05299 7.85463 9.14688L11.0006 12.2939V0.500876C11.0006 0.368268 11.0533 0.241091 11.1471 0.147323C11.2408 0.0535545 11.368 0.000876427 11.5006 0.000876427ZM4.50063 14.0009C4.63324 14.0009 4.76042 13.9482 4.85419 13.8544C4.94795 13.7607 5.00063 13.6335 5.00063 13.5009V1.70788L8.14663 4.85488C8.24052 4.94876 8.36786 5.00151 8.50063 5.00151C8.63341 5.00151 8.76074 4.94876 8.85463 4.85488C8.94852 4.76099 9.00126 4.63365 9.00126 4.50088C9.00126 4.3681 8.94852 4.24076 8.85463 4.14688L4.85463 0.146876C4.80819 0.100313 4.75301 0.0633706 4.69227 0.0381641C4.63152 0.0129577 4.5664 -1.71661e-05 4.50063 -1.71661e-05C4.43486 -1.71661e-05 4.36974 0.0129577 4.309 0.0381641C4.24825 0.0633706 4.19308 0.100313 4.14663 0.146876L0.146632 4.14688C0.052745 4.24076 -3.1283e-09 4.3681 0 4.50088C3.1283e-09 4.63365 0.052745 4.76099 0.146632 4.85488C0.240518 4.94876 0.367856 5.00151 0.500632 5.00151C0.633407 5.00151 0.760745 4.94876 0.854632 4.85488L4.00063 1.70788V13.5009C4.00063 13.6335 4.05331 13.7607 4.14708 13.8544C4.24085 13.9482 4.36802 14.0009 4.50063 14.0009Z"
                fill="currentColor" />
            </svg>Oldest to Newest</button>
          {% endif %}
        </div>
        <input type="hidden" id="sort" name="sort" value={{'date_asc' if sort_order=='date_desc' else 'date_desc' }}>
      </form>

      <!-- Selected tag indication -->
      {% if selected_tag != "" %}
      <div> Selected Tag:
        <a href="{{ url_for('card')}}" class="hover:text-blue-400">
          <span class="badge bg-blue-400 text-white hover:bg-blue-100">
            {{selected_tag}}<i class="bi bi-x"></i>
          </span>
        </a>
      </div>
      {% else %}
      <div> Click tag to search </div>
      {% endif %}
    </div>
    <!-- search bar -->
    <form method="post">
      <div>
        <div class="form-group flex flex-row">
          <input type="search" name="keyword" placeholder="Search in video"
            class="form-control rounded-none rounded-l-md" value="{{ request.form['keyword'] }}"
            onkeyup="this.value = this.value.replace(/[^A-Za-z0-9_-\s]/g, '')">
          </input>
          <button type="submit" class="btn text-white rounded-none rounded-r-md bg-duke-darkgray"><i
              class="fa fa-search"></i></button>
        </div>
      </div>
    </form>

  </div>

  <div class="card-deck md:mt-6 mt-3 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
    {% for recording in recordings %}
    <div class="card hover:shadow-md mb-3 max-w-md">


      <div class="card-header items-center grid grid-flow-col bg-transparent">
        <div class="justify-self-start text-sm text-duke-darkgray">
          {{ recording[3] }}
        </div>
        <div class="justify-self-end">
          <button
            class="ml-3 hover:border hover:bg-white hover:shadow hover:border-gray-600 rounded-lg p-1 hover:border hover:border-gray-100 text-gray-400 hover:text-blue-600">
            <a href="{{ url_for('edit', recording_id=recording[0]) }}">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
              </svg>
            </a>
          </button>
        </div>
      </div>

      <a href="{{ url_for('recording', recording_id=recording[0]) }}">
        <div class="card-body">

          <h5 class="card-title text-duke-darkgray hover:underline hover:text-blue-600 font-semibold text-2xl"> {{
            recording[2] }}

          </h5>
      </a>
      <div class="my-2 self-start items-center">
        {% for tag, value in recording[9] | dictsort(false, 'value', reverse=true) %}
        {% if tag == selected_tag %}
        <span class="badge bg-blue-400 text-white">{{ tag }}</span>
        {% elif recording[9][tag] <= -3 %} <a href="{{ url_for('cardTagFilter', tag=tag) }}">
          <span class="badge text-blue-400 bg-blue-50 hover:bg-blue-400 hover:text-white">{{ tag }}</span>
          </a>
          {% elif recording[9][tag] >= 3 %}
          <a href="{{ url_for('cardTagFilter', tag=tag) }}">
            <span class="badge text-blue-400 bg-blue-200 hover:bg-blue-400 hover:text-white">{{ tag }}</span></a>
          {% else %}
          <a href="{{ url_for('cardTagFilter', tag=tag) }}">
            <span class="badge text-blue-400 bg-blue-100 hover:bg-blue-400 hover:text-white">{{ tag }}</span>
          </a>
          {% endif %}
          {% endfor %}
      </div>

    </div>
  </div>
  {% endfor %}
  {% if permission %}
  <div class="bi bi-plus-circle items-center hover:text-blue-600 mb-3 max-w-md place-self-center">
    <a href="{{ url_for('create') }}">
      Add recording
    </a>
  </div>
  {% endif %}


</div>




{% endblock %}